<div class="dashboard-wrapper d-flex flex-column flex-md-row">
  <app-menu [menuActivo]="menuActivo" (cerrar)="cerrarMenu()"></app-menu>
  <div class="dashboard-main flex-grow-1">
    <app-breadcrumb [menuActivo]="menuActivo" (mostrarMenu)="mostrarMenu()"></app-breadcrumb>
    <section class="dashboard-content main__form mt-3">
      <div class="container-fluid px-2 px-md-5">
        <div class="d-flex flex-column flex-md-row align-items-stretch align-items-md-center mb-3 gap-2">
          <div class="d-flex flex-column flex-md-row gap-2 w-100">
            <button class="btn btn-primary d-flex align-items-center gap-2 fw-bold" (click)="grabar()">
              <i class="fa fa-save"></i> Grabar
            </button>
            <button class="btn btn-primary d-flex align-items-center gap-2" (click)="abrirModalAnexos()">
              <i class="fa fa-upload"></i> Cargar Anexos
            </button>
            <button class="btn btn-primary d-flex align-items-center gap-2" (click)="cerrar()">
              <i class="fa fa-ban"></i> Cerrar
            </button>
            <button class="btn btn-primary d-flex align-items-center gap-2" (click)="salir()">
              <i class="fa fa-arrow-right"></i> Salir
            </button>
          </div>
          <div class="dropdown ms-md-auto mt-2 mt-md-0">
            <button class="btn btn-danger dropdown-toggle fw-bold w-100 w-md-auto" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              {{estado}}
            </button>
            <ul class="dropdown-menu">
              <li *ngFor="let e of estados"><a class="dropdown-item" href="#">{{e}}</a></li>
            </ul>
          </div>
        </div>
        <div class="card mb-3 shadow-sm">
          <div class="card-header fw-bold">Datos Generales</div>
          <div class="card-body p-3">
            <form class="row g-2 align-items-end">
              <div class="col-12 col-md-4">
                <label class="form-label">Tipo:</label>
                <select class="form-select"><option>Factura / Boleta / Libre</option></select>
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Fecha Emisión:</label>
                <input type="text" class="form-control" placeholder="/ /" />
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Proveedor:</label>
                <select class="form-select"><option>Seleccione</option></select>
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Depósito:</label>
                <select class="form-select">
                  <option>BBVA</option>
                  <option>BCP</option>
                  <option>Efectivo</option>
                </select>
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Código de Cotización:</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Proyecto / Obra:</label>
                <select class="form-select"><option>Seleccione</option></select>
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Monto:</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">IGV:</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Total:</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Detracción:</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Retención:</label>
                <input type="text" class="form-control" />
              </div>

              <div class="col-12 col-md-4">
                <label class="form-label">Tipo Moneda:</label>
                <select class="form-select"><option>Seleccione</option></select>
              </div>
              <div class="col-12">
                <label class="form-label">Glosa:</label>
                <textarea class="form-control" rows="2"></textarea>
              </div>
            </form>
          </div>
        </div>
        <div class="card mb-3 shadow-sm">
          <div class="card-header fw-bold">Detalle</div>
          <div class="card-body p-3">
            <form class="row g-2 align-items-end mb-2">
              <div class="col-12 col-md-3">
                <label class="form-label">Tipo producto:</label>
                <select class="form-select"><option>Seleccione</option></select>
              </div>
              <div class="col-12 col-md-2">
                <label class="form-label">Unidad de Medida:</label>
                <select class="form-select"><option>Und, m2, m3</option></select>
              </div>
              <div class="col-12 col-md-3">
                <label class="form-label">Descripción:</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col-12 col-md-2">
                <label class="form-label">Cantidad:</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col-12 col-md-2">
                <button class="btn btn-outline-primary w-100" type="button" (click)="agregarDetalle()">Agregar</button>
              </div>
            </form>
            <div class="table-responsive">
              <table class="table table-bordered align-middle">
                <thead class="table-light">
                  <tr>
                    <th>Nro</th>
                    <th>Tipo Producto</th>
                    <th>Unidad Medida</th>
                    <th>Cantidad</th>
                    <th>Total</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let d of detalle">
                    <td>{{d.nro}}</td>
                    <td>{{d.tipo}}</td>
                    <td>{{d.unidad}}</td>
                    <td>{{d.cantidad}}</td>
                    <td>S/ {{d.total | number:'1.2-2'}}</td>
                    <td>
                      <button class="btn btn-sm btn-outline-danger" (click)="eliminarDetalle(d.nro)">&times;</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="row mt-3">
              <div class="col-12 col-md-4 ms-auto">
                <table class="table table-bordered mb-0" style="width:100%;">
                  <tbody>
                    <tr>
                      <td class="fw-bold">Monto :</td>
                      <td class="text-end">618.00</td>
                    </tr>
                    <tr>
                      <td class="fw-bold">IGV :</td>
                      <td class="text-end">618.00</td>
                    </tr>
                    <tr>
                      <td class="fw-bold">Detracción / Retención :</td>
                      <td class="text-end">618.00</td>
                    </tr>
                    <tr>
                      <td class="fw-bold">Total Final :</td>
                      <td class="text-end">618.00</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
